[OSEv3:children]
masters
nodes
etcd
glusterfs

# Set variables common for all OSEv3 hosts
[OSEv3:vars]
ansible_ssh_user=root
deployment_type=openshift-enterprise
openshift_web_console_inactivity_timeout_minutes=15

# Turn on CRI-O Support
#openshift_use_crio=true
#openshift_crio_use_rpm=true
#openshift_crio_enable_docker_gc=true
#openshift_crio_docker_gc_node_selector={}

# Configure master API and console ports and URLs
openshift_master_api_port=8443
openshift_master_console_port=8443

# Identity provider
openshift_master_identity_providers=[{'name':'htpasswd_auth','login':'true','challenge':'true','kind':'HTPasswdPasswordIdentityProvider'}]
#openshift_master_htpasswd_users={'admin': '$1$OZpj1NRF$78o05stOQYZvFF7zkOZ2w0'}

# External LB
#openshift_master_cluster_hostname=webconsole.openshift.pub
#openshift_master_cluster_public_hostname=webconsole.openshift.pub

# OVS SDN plugin
os_sdn_network_plugin_name=redhat/openshift-ovs-networkpolicy

# disable checks
openshift_disable_check=memory_availability

# Default subdomain and node labelling
openshift_master_default_subdomain=apps.openshift.pub

# GlusterFS
openshift_storage_glusterfs_namespace=cns
openshift_storage_glusterfs_heketi_wipe=true
openshift_storage_glusterfs_wipe=true
openshift_storage_glusterfs_storageclass=true
openshift_storage_glusterfs_storageclass_default=true
openshift_storage_glusterfs_block_deploy=true
openshift_storage_glusterfs_block_host_vol_size=50
openshift_storage_glusterfs_block_storageclass=true

# Routers
openshift_hosted_router_replicas=1

# Registry
openshift_hosted_registry_replicas=1
openshift_hosted_registry_storage_volume_size=20Gi
openshift_hosted_manage_registry=true
openshift_hosted_registry_storage_kind=glusterfs
openshift_hosted_registry_selector='node-role.kubernetes.io/infra=true'

# Monitoring
openshift_cluster_monitoring_operator_install=false
openshift_cluster_monitoring_operator_prometheus_storage_capacity=5G

# Autoheal
openshift_autoheal_deploy=false

# Descheduler
openshift_descheduler_install=false

# Logging, see: https://docs.openshift.com/enterprise/latest/install_config/aggregate_logging.html
openshift_logging_install_logging=true
openshift_logging_use_ops=false
openshift_logging_es_nodeselector={"node-role.kubernetes.io/infra":"true"}
openshift_logging_curator_nodeselector={"node-role.kubernetes.io/infra":"true"}
openshift_logging_kibana_nodeselector={"node-role.kubernetes.io/infra":"true"}
openshift_logging_es_cluster_size=1
openshift_logging_es_pvc_dynamic=true
openshift_logging_es_pvc_storage_class_name=glusterfs-storage-block
openshift_logging_storage_volume_size=10Gi
openshift_logging_es_memory_limit=512Mi
openshift_logging_curator_memory_limit=128Mi
openshift_logging_kibana_memory_limit=512Mi
openshift_logging_fluentd_memory_limit=256Mi

# Metrics, see: https://docs.openshift.com/enterprise/latest/install_config/cluster_metrics.html
openshift_metrics_install_metrics=true
openshift_metrics_hawkular_nodeselector={"node-role.kubernetes.io/infra":"true"}
openshift_metrics_cassandra_nodeselector={"node-role.kubernetes.io/infra":"true"}
openshift_metrics_heapster_nodeselector={"node-role.kubernetes.io/infra":"true"}
openshift_metrics_cassandra_storage_type=dynamic
openshift_metrics_cassandra_pvc_storage_class_name=glusterfs-storage-block
openshift_metrics_storage_volume_size=10Gi
openshift_metrics_cassandra_limits_memory=1Gi
openshift_metrics_hawkular_limits_memory=2Gi
openshift_metrics_heapster_limits_memory=1Gi

# Prometheus
openshift_hosted_prometheus_deploy=true
openshift_prometheus_namespace=openshift-metrics
openshift_prometheus_node_selector={"node-role.kubernetes.io/infra":"true"}
openshift_prometheus_storage_volume_name=prometheus
openshift_prometheus_storage_volume_size=10Gi
openshift_prometheus_storage_type='pvc'
openshift_prometheus_alertmanager_storage_volume_name=prometheus-alertmanager
openshift_prometheus_alertmanager_storage_volume_size=1Gi
openshift_prometheus_alertmanager_storage_type='pvc'
openshift_prometheus_alertbuffer_storage_volume_name=prometheus-alertbuffer
openshift_prometheus_alertbuffer_storage_volume_size=1Gi
openshift_prometheus_alertbuffer_storage_type='pvc'

# Grafana
openshift_grafana_node_exporter=true
openshift_grafana_storage_type=pvc
openshift_grafana_sc_name=glusterfs-storage
openshift_grafana_node_selector={"node-role.kubernetes.io/infra":"true"}

# Service catalog
#openshift_service_catalog_image_version=latest
#ansible_service_broker_local_registry_whitelist=['.*-apb$']
#openshift_template_service_broker_namespaces=['openshift']

# CloudForms
openshift_management_install_management=false
openshift_management_install_beta=true
openshift_management_project=openshift-management
openshift_management_project_description=CloudForms Management Engine
openshift_management_storage_class=preconfigured
openshift_management_app_template=cfme-template
openshift_management_storage_class=nfs_external
openshift_management_storage_nfs_external_hostname=agesnas2.ageslab.com
openshift_management_storage_nfs_base_dir=/volume5/nfs1/openshift/cfme
openshift_management_template_parameters={'APPLICATION_VOLUME_CAPACITY': '10Gi', 'DATABASE_VOLUME_CAPACITY': '25Gi', 'APPLICATION_MEM_REQ': '3000Mi', 'POSTGRESQL_MEM_REQ': '1Gi', 'ANSIBLE_MEM_REQ': '512Mi'}

# host group for masters
[masters]
master.ageslab.com

# host group for etcd
[etcd]
master.ageslab.com

# host group for gluster
[glusterfs]
appnode1.ageslab.com glusterfs_devices='[ "/dev/vdc" ]'
appnode2.ageslab.com glusterfs_devices='[ "/dev/vdc" ]'
appnode3.ageslab.com glusterfs_devices='[ "/dev/vdc" ]'

# host group for nodes
[nodes]
master.ageslab.com openshift_node_group_name='node-config-master-infra' openshift_public_hostname='webconsole.openshift.pub'
appnode1.ageslab.com openshift_node_group_name='node-config-compute'
appnode2.ageslab.com openshift_node_group_name='node-config-compute'
appnode3.ageslab.com openshift_node_group_name='node-config-compute'